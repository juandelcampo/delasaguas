<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeLasAguas - SystemOS</title>
    
    <script src="https://w.soundcloud.com/player/api.js"></script>

    <style>
        /* --- RESET Y BASE OS --- */
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }
        
        body, html {
            width: 100vw; height: 100vh; 
            background: url('https://static.boredpanda.com/blog/wp-content/uploads/2017/06/DSC00330-Edit-59391339deded__880.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: Tahoma, "Trebuchet MS", sans-serif;
            overflow: hidden; 
            font-size: 12px; 
        }

        /* WIDGET SOUNDCLOUD (Físicamente en el DOM para evitar bloqueos) */
        #sc-widget-container { position: absolute; width: 1px; height: 1px; top: 0; left: 0; opacity: 0; pointer-events: none; z-index: -100; }

        /* --- ESCRITORIO E ICONOS --- */
        #desktop-area {
            height: calc(100vh - 38px); 
            width: 100vw; padding: 20px; display: flex; flex-direction: column; flex-wrap: wrap; 
            gap: 25px; align-content: flex-start; position: relative; z-index: 1;
        }

        .desktop-icon {
            width: 80px; display: flex; flex-direction: column; align-items: center;
            text-align: center; color: white; cursor: pointer;
            text-shadow: 1px 1px 2px #000; gap: 5px; margin-bottom: 10px;
        }
        .desktop-icon img { width: 42px; height: 42px; filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.5)); image-rendering: pixelated;}
        .desktop-icon span { padding: 2px 4px; border-radius: 2px; line-height: 1.2; }
        .desktop-icon:active span { background: #0b61ff; }
        .desktop-icon:active img { filter: brightness(0.5) sepia(1) hue-rotate(200deg) saturate(5); }

        /* --- SISTEMA DE VENTANAS (TEMA ESTILIZADO MIDNIGHT) --- */
        .window-container {
            position: absolute; background-color: #f4f4f4;
            border: 1px solid #111; border-radius: 6px 6px 0 0;
            box-shadow: 4px 4px 15px rgba(0,0,0,0.6);
            display: flex; flex-direction: column; overflow: hidden;
            resize: both; min-width: 350px; min-height: 250px;
        }

        .window-container.hidden { display: none !important; }
        .window-container.minimized { display: none !important; }
        .window-container.maximized {
            top: 0 !important; left: 0 !important;
            width: 100vw !important; height: calc(100vh - 38px) !important;
            border-radius: 0; resize: none;
        }

        /* Barra de Título */
        .os-titlebar {
            background: linear-gradient(to bottom, #4a4a4a 0%, #2b2b2b 100%);
            padding: 4px 8px; height: 30px;
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #000; cursor: default;
        }
        .os-title { color: #eee; font-weight: bold; text-shadow: 1px 1px #000; display: flex; align-items: center; gap: 6px; font-size: 12px;}
        .os-title img { width: 16px; height: 16px; image-rendering: pixelated; }
        
        .os-controls { display: flex; gap: 3px; }
        .os-btn {
            width: 22px; height: 22px; border-radius: 3px; border: 1px solid #666;
            color: white; font-weight: bold; font-family: Arial; font-size: 12px;
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            box-shadow: inset 0 -1px 2px rgba(0,0,0,0.5); text-shadow: 1px 1px 1px rgba(0,0,0,0.8);
        }
        .os-btn-blue { background: linear-gradient(to bottom, #666, #333); }
        .os-btn-blue:active { background: #222; box-shadow: inset 0 2px 3px rgba(0,0,0,0.8); }
        .os-btn-close { background: linear-gradient(to bottom, #c9402a, #8f1b0a); border-color: #e26f5d; }
        .os-btn-close:active { background: #661004; box-shadow: inset 0 2px 3px rgba(0,0,0,0.8); }

        /* Cuerpos de Ventana */
        .os-explorer-body { display: flex; flex: 1; min-height: 0; border-top: 1px solid #666; background: #fff;}
        
        /* SIDEBAR DE CARPETAS */
        .os-sidebar-panel { width: 190px; background: linear-gradient(to bottom, #2b2b36, #1a1a24); padding: 15px; border-right: 1px solid #999; color: white; overflow-y: auto; }
        .os-sidebar-box { background: #ece9d8; border-radius: 3px; overflow: hidden; box-shadow: 1px 1px 3px rgba(0,0,0,0.5); margin-bottom: 15px; }
        .os-box-header { background: linear-gradient(to right, #ccc, #aaa); color: #000; font-weight: bold; padding: 5px 10px; font-size: 11px; border-bottom: 1px solid #999;}
        .os-box-content { padding: 10px; color: #000; font-size: 11px; background: #fff;}
        .sidebar-link { display: flex; align-items: center; gap: 6px; color: #0033cc; cursor: pointer; margin-bottom: 8px; font-size: 11px;}
        .sidebar-link:hover { color: #0077ff; text-decoration: underline; }
        .sidebar-link img { width: 14px; height: 14px; image-rendering: pixelated;}

        .os-main-content { flex: 1; padding: 20px; overflow-y: auto; background: #fdfdfd; }
        
        /* Bloc de Notas */
        .notepad-body { flex: 1; display: flex; flex-direction: column; background: #fff; min-height: 0;}
        .notepad-menubar { background: #d0d0d0; padding: 4px 8px; border-bottom: 1px solid #999; display: flex; gap: 15px; font-size: 12px; }
        .notepad-textarea { flex: 1; border: none; resize: none; padding: 10px; font-family: 'Courier New', monospace; font-size: 14px; overflow-y: auto; outline: none; }

        /* --- VISOR MULTIMEDIA UNIFICADO --- */
        .media-viewer-body { flex: 1; display: flex; flex-direction: column; background: #111; min-height: 0; }
        .media-content-area { flex: 1; display: flex; justify-content: center; align-items: center; padding: 0; min-height: 0; background: #000; position: relative;}
        .media-content-area iframe, .media-content-area img { width: 100%; height: 100%; object-fit: contain; border: none; display: none; }
        
        /* Controles de Navegación de Imágenes */
        .media-viewer-toolbar {
            height: 45px; background: #ece9d8; border-top: 1px solid #fff;
            display: none; justify-content: center; align-items: center; gap: 20px;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); width: 100%; flex-shrink: 0;
        }
        .media-viewer-toolbar.active { display: flex; }
        .toolbar-btn {
            width: 30px; height: 30px; border-radius: 50%; border: 1px solid #999;
            background: linear-gradient(to bottom, #fff, #ddd); font-size: 14px; cursor: pointer;
            display: flex; justify-content: center; align-items: center; color: #333;
            box-shadow: 1px 1px 3px rgba(0,0,0,0.3); transition: 0.1s;
        }
        .toolbar-btn:active { background: #ccc; box-shadow: inset 1px 1px 3px rgba(0,0,0,0.5); transform: translateY(1px);}

        /* ICONOS DE ARCHIVO AÚN MÁS GRANDES */
        .grid-files { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; align-items: start; }
        .file-item { display: flex; flex-direction: column; align-items: center; text-align: center; cursor: pointer; padding: 10px; border: 1px dotted transparent; border-radius: 4px; height: max-content;}
        .file-item:hover { background-color: #dbeaff; border-color: #9ac6ff; }
        .file-item img.file-thumb { width: 140px; height: 105px; object-fit: cover; border: 1px solid #ccc; padding: 2px; background: #fff; box-shadow: 2px 2px 5px rgba(0,0,0,0.3); }
        .file-item img.file-icon-img { width: 50px; height: 50px; image-rendering: pixelated; }
        .file-item span { margin-top: 10px; font-size: 12px; word-break: break-word; color: #000; line-height: 1.2;}

        /* ========================================================
           CLON DE WINAMP (MUCHO MÁS GRANDE, ESCALABLE Y CON BARRA)
           ======================================================== */
        .winamp-window {
            background: #272832; border: 2px solid; border-color: #6d6d7c #000 #000 #6d6d7c;
            width: 420px; min-width: 380px; height: 320px; min-height: 280px;
            border-radius: 0; resize: both; box-shadow: 6px 6px 15px rgba(0,0,0,0.8);
            padding: 4px; display: flex; flex-direction: column; gap: 6px; overflow: hidden;
        }
        
        .wa-module { background: #2a2a35; padding: 12px; border: 1px solid #000; box-shadow: inset 1px 1px 1px #444; flex-shrink: 0;}

        /* Titulo Winamp */
        .wa-titlebar {
            background: linear-gradient(to right, #1d1d29, #333346, #1d1d29); height: 20px;
            display: flex; justify-content: space-between; align-items: center; padding: 0 6px;
            border: 1px solid #000; cursor: default; margin-bottom: 2px; flex-shrink: 0;
        }
        .wa-title { font-family: Tahoma, sans-serif; font-size: 11px; color: #d3d3d3; font-weight: bold; letter-spacing: 2px; margin-left: 5px;}
        .wa-controls { display: flex; gap: 4px; }
        .wa-btn-close { width: 14px; height: 14px; background: #bbaaaa; border: 1px solid; border-color: #fff #555 #555 #fff; font-size: 10px; display: flex; justify-content: center; align-items: center; cursor: pointer; color: #000; font-weight: bold; }
        .wa-btn-close:active { border-color: #555 #fff #fff #555; padding-top: 1px; padding-left: 1px; }

        /* Pantalla Principal */
        .wa-screen-container { background: #000; border: 2px inset #666; height: 75px; padding: 8px 12px; display: flex; gap: 15px; align-items: center; margin-bottom: 10px; }
        .wa-left-screen { display: flex; flex-direction: column; align-items: center; gap: 6px; }
        .wa-time { font-family: 'Courier New', monospace; font-size: 32px; color: #00ff00; font-weight: bold; line-height: 1; text-shadow: 0 0 5px #00ff00; letter-spacing: -1px;}
        
        /* Waveform Animator */
        .wa-visualizer { display: flex; align-items: flex-end; gap: 2px; height: 16px; width: 100%; border-bottom: 2px solid #003300; }
        .vis-bar { width: 8px; background: #00ff00; height: 3px; transition: height 0.1s; }
        .wa-visualizer.playing .vis-bar { animation: eq 0.4s infinite alternate ease-in-out; }
        .wa-visualizer .vis-bar:nth-child(1) { animation-duration: 0.3s; }
        .wa-visualizer .vis-bar:nth-child(2) { animation-duration: 0.5s; }
        .wa-visualizer .vis-bar:nth-child(3) { animation-duration: 0.2s; }
        .wa-visualizer .vis-bar:nth-child(4) { animation-duration: 0.6s; }
        .wa-visualizer .vis-bar:nth-child(5) { animation-duration: 0.4s; }
        .wa-visualizer .vis-bar:nth-child(6) { animation-duration: 0.7s; }
        @keyframes eq { 0% { height: 3px; } 100% { height: 100%; } }

        .wa-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; height: 100%; overflow: hidden;}
        .wa-title-scroll { font-family: 'Courier New', monospace; font-size: 14px; color: #00ff00; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; background: #002200; padding: 4px; border: 1px solid #004400; margin-bottom: 4px;}
        .wa-stats { font-family: 'Courier New', monospace; font-size: 12px; color: #00aa00; display: flex; gap: 12px;}

        /* LÍNEA DE TIEMPO Y SLIDER DE PROGRESO REAL */
        .wa-slider-area { margin-bottom: 10px; padding: 0 5px; flex-shrink: 0;}
        .wa-timeline-text { display: flex; justify-content: space-between; font-family: 'Courier New', monospace; font-size: 12px; font-weight: bold; color: #00aa00; margin-bottom: 4px; }
        
        .wa-seek-slider {
            -webkit-appearance: none; appearance: none;
            width: 100%; height: 14px; background: #050505; margin: 0;
            border: 2px inset #555; cursor: pointer; outline: none;
        }
        .wa-seek-slider::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            width: 30px; height: 16px; background: #C0C0C0;
            border: 2px solid; border-color: #fff #555 #555 #fff; cursor: pointer;
        }

        /* Controles Inferiores */
        .wa-controls-area { display: flex; align-items: center; justify-content: space-between; padding-left: 5px; flex-shrink: 0;}
        .wa-buttons { display: flex; gap: 6px; }
        .wa-btn { background: linear-gradient(to bottom, #d6d3ce, #999); border: 2px solid; border-color: #fff #555 #555 #fff; height: 30px; width: 38px; font-size: 14px; font-weight: bold; cursor: pointer; color: #000; display: flex; justify-content: center; align-items: center; font-family: Arial; }
        .wa-btn:active { border-color: #555 #fff #fff #555; padding-top: 2px; padding-left: 2px; background: #a9a9a9;}
        .wa-btn.play { width: 45px; font-size: 18px; }

        /* Fader Volumen Winamp */
        .wa-volume-box { display: flex; align-items: center; gap: 6px; color: #00aa00; font-family: 'Courier New', monospace; font-size: 13px; font-weight: bold;}
        .wa-vol-slider {
            -webkit-appearance: none; appearance: none; width: 90px; height: 12px; background: #000; margin: 0; border: 2px inset #555; cursor: pointer;
        }
        .wa-vol-slider::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none; width: 12px; height: 18px; background: #C0C0C0; border: 2px solid; border-color: #fff #555 #555 #fff; cursor: pointer;
        }

        /* Playlist Módulo (Crece al agrandar la ventana) */
        .wa-playlist-module { background: #000; border: 2px inset #555; padding: 6px; flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; min-height: 70px;}
        .wa-pl-item { font-family: 'Courier New', monospace; font-size: 13px; color: #00aa00; padding: 4px 6px; display: flex; justify-content: space-between; cursor: pointer;}
        .wa-pl-item.active { background: #002200; color: #00ff00; }

        /* ======================================================== */

        /* --- BARRA DE TAREAS --- */
        #taskbar {
            position: fixed; bottom: 0; left: 0; width: 100vw; height: 38px;
            background: linear-gradient(to bottom, #303030, #111);
            display: flex; align-items: center; z-index: 10000; border-top: 2px solid #555;
        }
        
        .start-btn {
            background: linear-gradient(to bottom, #0078D7, #00427a);
            color: white; font-weight: bold; font-size: 15px; font-style: italic;
            height: 100%; padding: 0 20px 0 15px; border: none; border-radius: 0 15px 15px 0;
            display: flex; align-items: center; gap: 8px; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.3);
            cursor: pointer; text-shadow: 1px 1px 2px rgba(0,0,0,0.8); flex-shrink: 0; border-right: 1px solid #002244;
        }
        .start-btn:active, .start-btn.active { background: #00427a; box-shadow: inset 1px 1px 5px rgba(0,0,0,0.8); }

        #taskbar-windows { flex: 1; display: flex; gap: 4px; padding: 0 10px; overflow: hidden; align-items: center; height: 100%;}
        
        .taskbar-item {
            background: linear-gradient(to bottom, #5a5a5a, #333);
            border: 1px solid #222; border-radius: 3px; color: white;
            padding: 0 10px; height: 28px; display: flex; align-items: center; gap: 8px;
            cursor: pointer; min-width: 100px; max-width: 180px; font-size: 12px;
            box-shadow: inset 1px 1px 1px rgba(255,255,255,0.1);
        }
        .taskbar-item img { width: 16px; height: 16px; image-rendering: pixelated; }
        .taskbar-item span { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .taskbar-item:hover { background: linear-gradient(to bottom, #6a6a6a, #444); }
        .taskbar-item.active { background: linear-gradient(to bottom, #222, #000); box-shadow: inset 0 2px 5px rgba(0,0,0,0.6); color: #ccc;}

        .tray-area {
            background: linear-gradient(to bottom, #222, #050505);
            height: 100%; border-left: 1px solid #444; padding: 0 15px;
            display: flex; align-items: center; gap: 15px; color: white; font-size: 12px;
            box-shadow: inset 1px 0 1px rgba(255,255,255,0.1); flex-shrink: 0; position: relative;
        }

        /* --- MENÚ DE INICIO --- */
        #start-menu {
            position: fixed; bottom: 38px; left: 0; width: 320px; height: 420px;
            background: #fff; border: 1px solid #111; border-top-right-radius: 8px;
            box-shadow: 4px -4px 15px rgba(0,0,0,0.6); z-index: 10001;
            display: none; flex-direction: column; overflow: hidden;
        }
        #start-menu.active { display: flex; }
        
        .sm-header {
            background: linear-gradient(to bottom, #2b2b36, #1a1a24); height: 55px;
            display: flex; align-items: center; padding: 0 15px; gap: 12px; color: white; font-weight: bold; font-size: 15px; border-bottom: 2px solid #0078D7;
        }
        .sm-header img { width: 38px; height: 38px; border: 2px solid rgba(255,255,255,0.6); border-radius: 4px; image-rendering: pixelated;}
        
        .sm-body { display: flex; flex: 1; }
        .sm-left { flex: 1; padding: 8px; display: flex; flex-direction: column; gap: 4px; background: #fff;}
        .sm-right { width: 140px; background: #e0e6ed; border-left: 1px solid #b5cbe6; padding: 8px; display: flex; flex-direction: column; gap: 4px; }
        
        .sm-item { display: flex; align-items: center; gap: 10px; padding: 10px; cursor: pointer; color: #000; border-radius: 4px;}
        .sm-item:hover { background: #0078D7; color: white; }
        .sm-item img { width: 28px; height: 28px; image-rendering: pixelated;}
        .sm-item span { font-size: 12px; font-weight: bold;}
        .sm-item p { font-size: 10px; color: #666; font-weight: normal; margin: 0;}
        .sm-item:hover p { color: #ddd; }
        
        .sm-footer {
            background: linear-gradient(to bottom, #4a4a4a, #2b2b2b); height: 45px;
            display: flex; justify-content: flex-end; align-items: center; padding: 0 15px; border-top: 1px solid #666;
        }
        .sm-footer-btn { display: flex; align-items: center; gap: 8px; color: white; font-size: 12px; cursor: pointer; padding: 5px 10px; border-radius: 3px;}
        .sm-footer-btn:hover { background: rgba(255,255,255,0.1); }
        .sm-footer-btn img { width: 22px; height: 22px; image-rendering: pixelated;}

    </style>
</head>
<body>

    <div id="sc-widget-container">
        <iframe id="sc-widget" allow="autoplay; encrypted-media; clipboard-write" src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/juan-manuel-309/delasaguas-jam-08-2010&auto_play=false&enable_api=true" frameborder="0" width="100%" height="166"></iframe>
    </div>

    <div id="desktop-area">
        <div class="desktop-icon" onclick="openWindow('notepad-leeme', 'LEEME.txt', 'https://win98icons.alexmeub.com/icons/png/notepad_file-0.png')">
            <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png" alt="Notepad">
            <span>LEEME.txt</span>
        </div>
        <div class="desktop-icon" onclick="openWindow('soundamp-player', 'SoundAmp', 'https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png')">
            <img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png" alt="Música">
            <span>Mi Música</span>
        </div>
        <div class="desktop-icon" onclick="openWindow('folder-images', 'Mis Imágenes', 'https://win98icons.alexmeub.com/icons/png/directory_closed-4.png')">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png" alt="Imágenes">
            <span>Mis Imágenes</span>
        </div>
        <div class="desktop-icon" onclick="openWindow('folder-videos', 'Mis Videos', 'https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png')">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png" alt="Videos">
            <span>Mis Videos</span>
        </div>
    </div>


    <div id="notepad-leeme" class="window-container hidden" style="top: 50px; left: 600px; width: 450px; height: 350px;">
        <div class="os-titlebar">
            <div class="os-title"><img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png"> LEEME.txt - Bloc de notas</div>
            <div class="os-controls">
                <div class="os-btn os-btn-blue" onclick="minimizeWindow('notepad-leeme', event)">_</div>
                <div class="os-btn os-btn-blue" onclick="maximizeWindow('notepad-leeme', event)">□</div>
                <div class="os-btn os-btn-close" onclick="closeWindow('notepad-leeme', event)">X</div>
            </div>
        </div>
        <div class="notepad-body">
            <div class="notepad-menubar"><span>Archivo</span> <span>Edición</span> <span>Formato</span> <span>Ver</span> <span>Ayuda</span></div>
            <textarea class="notepad-textarea" readonly>DeLasAguas

Un laboratorio audiovisual que disolvió las fronteras entre la música y el videoarte.

Transitando libremente desde la bossa nova y el funk hasta la psicodelia y el stoner, sus presentaciones en vivo eran rituales ininterrumpidos de inmersión total.

Su legado se condensa en "Los sueños de Pellicciaro", un proyecto independiente donde el sonido, las proyecciones y la obra gráfica convergen en una sola pieza indivisible.</textarea>
        </div>
    </div>

    <div id="soundamp-player" class="window-container winamp-window hidden" style="top: 150px; left: 100px;">
        <div class="wa-titlebar">
            <div class="wa-title">SOUNDAMP 3.0</div>
            <div class="wa-controls">
                <div class="wa-btn-close" onclick="minimizeWindow('soundamp-player', event)">_</div>
                <div class="wa-btn-close" onclick="closeWindow('soundamp-player', event)">X</div>
            </div>
        </div>
        
        <div class="wa-module wa-body">
            <div class="wa-screen-container">
                <div class="wa-left-screen">
                    <div class="wa-time" id="wa-time-display">00:00</div>
                    <div class="wa-visualizer" id="visualizer">
                        <div class="vis-bar"></div><div class="vis-bar"></div><div class="vis-bar"></div><div class="vis-bar"></div><div class="vis-bar"></div><div class="vis-bar"></div>
                    </div>
                </div>
                <div class="wa-info">
                    <div class="wa-title-scroll">1. DeLasAguas - El Largo (08-2010) *** </div>
                    <div class="wa-stats"><span>192 kbps</span> <span>44 kHz</span></div>
                </div>
            </div>
            
            <div class="wa-slider-area">
                <div class="wa-timeline-text">
                    <span id="wa-current-time-line">00:00</span>
                    <span id="wa-total-time-line">--:--</span>
                </div>
                <input type="range" class="wa-seek-slider" id="wa-seek-slider" min="0" max="100" value="0">
            </div>
            
            <div class="wa-controls-area">
                <div class="wa-buttons">
                    <button class="wa-btn" onclick="scStop()">|&lt;</button>
                    <button class="wa-btn wa-btn-play play" onclick="scPlay()">►</button>
                    <button class="wa-btn" onclick="scPause()">||</button>
                    <button class="wa-btn" onclick="scStop()">■</button>
                    <button class="wa-btn" onclick="scStop()">&gt;|</button>
                </div>
                <div class="wa-volume-box">
                    <span>VOL</span>
                    <input type="range" class="wa-vol-slider" id="wa-vol-slider" min="0" max="100" value="100" title="Volumen">
                </div>
            </div>
        </div>

        <div class="wa-module wa-playlist-module">
            <div class="wa-pl-item active" onclick="scPlay()"><span>1. El Largo (Jam 08-2010)</span> <span id="wa-total-time">Cargando...</span></div>
        </div>
    </div>

    <div id="folder-images" class="window-container hidden" style="top: 80px; left: 150px; width: 650px; height: 450px;">
        <div class="os-titlebar">
            <div class="os-title"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png"> Mis Imágenes</div>
            <div class="os-controls">
                <div class="os-btn os-btn-blue" onclick="minimizeWindow('folder-images', event)">_</div>
                <div class="os-btn os-btn-blue" onclick="maximizeWindow('folder-images', event)">□</div>
                <div class="os-btn os-btn-close" onclick="closeWindow('folder-images', event)">X</div>
            </div>
        </div>
        <div class="os-explorer-body">
            <div class="os-sidebar-panel">
                <div class="os-sidebar-box">
                    <div class="os-box-header">Otros lugares</div>
                    <div class="os-box-content">
                        <div class="sidebar-link" onclick="openWindow('folder-videos', 'Mis Videos', 'https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png')"><img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png"> Mis Videos</div>
                        <div class="sidebar-link" onclick="openWindow('soundamp-player', 'SoundAmp', 'https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png')"><img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png"> Mi Música</div>
                        <div class="sidebar-link" onclick="openWindow('notepad-leeme', 'LEEME.txt', 'https://win98icons.alexmeub.com/icons/png/notepad_file-0.png')"><img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png"> LEEME.txt</div>
                    </div>
                </div>
            </div>
            <div class="os-main-content grid-files">
                <div class="file-item" onclick="openImage(0)">
                    <img class="file-thumb" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgPsdaTj9ebqPIdCv8cc0ofCD7OjIh7y264BCYUvoTINijmxaU6LJVrMgh1lpkAD1bH-Wn62BIWjQczsNkF8cHSakDbgeLFDdnUhZyZhzOgVYSqu9phnU4HutjuZOCgHjt6Dk2Vs9kUDnw/s1600/Dla_prov.jpg" referrerpolicy="no-referrer">
                    <span>Dla_prov.jpg</span>
                </div>
                <div class="file-item" onclick="openImage(1)">
                    <img class="file-thumb" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg_JczWFySWlfOX7f5xAELbDkjKwvgxlWwgPnmdD5DTvnp_zicjcrshyphenhyphen78lee2I-MEP2LglMxmBo-Jpgf4BPRRLFs6C0CfjXKdSQW5T9Rf9XRCUG6FbC86Wsx30W_Q3uKKdp1az7h3cvpw/s1600/EPR.jpg" referrerpolicy="no-referrer">
                    <span>EPR.jpg</span>
                </div>
                 <div class="file-item" onclick="openImage(2)">
                    <img class="file-thumb" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgHuIyhlzrd5RO2p7NVkoIBJ06uSDTtIzCQ_Pe6ctGmPtJ8_7Np7CLlAOIbXQRtsa09hyphenhyphenVQObMuVTSNRDJpgU9h5-DyNAWEvPRXyCw_OolRyC6KqGyl3kQUSWQDLFXhF9qwWHbRem3S_cs/s1600/De+las+Aguas.jpg" referrerpolicy="no-referrer">
                    <span>De_las_Aguas.jpg</span>
                </div>
                <div class="file-item" onclick="openImage(3)">
                    <img class="file-thumb" src="https://iili.io/qfCtFrg.jpg" referrerpolicy="no-referrer">
                    <span>Samurai.jpg</span>
                </div>
                <div class="file-item" onclick="openImage(4)">
                    <img class="file-thumb" src="https://iili.io/qfCD3t2.jpg" referrerpolicy="no-referrer">
                    <span>Koala.jpg</span>
                </div>
            </div>
        </div>
    </div>

    <div id="folder-videos" class="window-container hidden" style="top: 130px; left: 250px; width: 750px; height: 500px;">
        <div class="os-titlebar">
            <div class="os-title"><img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png"> Mis Videos</div>
            <div class="os-controls">
                <div class="os-btn os-btn-blue" onclick="minimizeWindow('folder-videos', event)">_</div>
                <div class="os-btn os-btn-blue" onclick="maximizeWindow('folder-videos', event)">□</div>
                <div class="os-btn os-btn-close" onclick="closeWindow('folder-videos', event)">X</div>
            </div>
        </div>
        <div class="os-explorer-body">
            <div class="os-sidebar-panel">
                <div class="os-sidebar-box">
                    <div class="os-box-header">Otros lugares</div>
                    <div class="os-box-content">
                        <div class="sidebar-link" onclick="openWindow('folder-images', 'Mis Imágenes', 'https://win98icons.alexmeub.com/icons/png/directory_closed-4.png')"><img src="https://win98icons.alexmeub.com/icons/png/directory_closed-4.png"> Mis Imágenes</div>
                        <div class="sidebar-link" onclick="openWindow('soundamp-player', 'SoundAmp', 'https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png')"><img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png"> Mi Música</div>
                        <div class="sidebar-link" onclick="openWindow('notepad-leeme', 'LEEME.txt', 'https://win98icons.alexmeub.com/icons/png/notepad_file-0.png')"><img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png"> LEEME.txt</div>
                    </div>
                </div>
            </div>
            <div class="os-main-content grid-files">
                <div class="file-item" onclick="openVideo('KVc3yQr89to', 'NuevoDía.avi')">
                    <img class="file-thumb" src="https://img.youtube.com/vi/KVc3yQr89to/hqdefault.jpg"><span>NuevoDía.avi</span>
                </div>
                <div class="file-item" onclick="openVideo('MEvLUSr2e9Y', 'Lección7.wmv')">
                    <img class="file-thumb" src="https://img.youtube.com/vi/MEvLUSr2e9Y/hqdefault.jpg"><span>Lección7.wmv</span>
                </div>
                <div class="file-item" onclick="openVideo('bTNAxV6jn2Y', 'Lección11_vivo.mpg')">
                    <img class="file-thumb" src="https://img.youtube.com/vi/bTNAxV6jn2Y/hqdefault.jpg"><span>Lección11_vivo.mpg</span>
                </div>
                 <div class="file-item" onclick="openVideo('8hLqNGp78b8', 'MillonesDeSonidos.avi')">
                    <img class="file-thumb" src="https://img.youtube.com/vi/8hLqNGp78b8/hqdefault.jpg"><span>MillonesDeSonidos.avi</span>
                </div>
                 <div class="file-item" onclick="openVideo('hwLEuHiV1kE', 'Fine.mp4')">
                    <img class="file-thumb" src="https://img.youtube.com/vi/hwLEuHiV1kE/hqdefault.jpg"><span>Fine.mp4</span>
                </div>
                 <div class="file-item" onclick="openVideo('qiNnFuErDOw', 'Porno.avi')">
                    <img class="file-thumb" src="https://img.youtube.com/vi/qiNnFuErDOw/hqdefault.jpg"><span>Porno.avi</span>
                </div>
            </div>
        </div>
    </div>

    <div id="media-viewer" class="window-container hidden" style="top: 50px; left: 100px; width: 800px; height: 550px; z-index: 1000;">
        <div class="os-titlebar">
            <div class="os-title" id="media-title"><img src="https://win98icons.alexmeub.com/icons/png/video_file-0.png"> Reproductor</div>
            <div class="os-controls">
                <div class="os-btn os-btn-blue" onclick="minimizeWindow('media-viewer', event)">_</div>
                <div class="os-btn os-btn-blue" onclick="maximizeWindow('media-viewer', event)">□</div>
                <div class="os-btn os-btn-close" onclick="closeViewer(event)">X</div>
            </div>
        </div>
        <div class="media-viewer-body">
            <div class="media-content-area">
                <iframe id="viewer-iframe" src="" allow="autoplay; encrypted-media; picture-in-picture; fullscreen" allowfullscreen style="display:none; width: 100%; height: 100%; border: none;"></iframe>
                <img id="viewer-image" src="" style="display:none;" referrerpolicy="no-referrer">
            </div>
            <div class="media-viewer-toolbar" id="media-viewer-toolbar">
                <button class="toolbar-btn" onclick="prevImage()" title="Anterior">◄</button>
                <button class="toolbar-btn" onclick="nextImage()" title="Siguiente">►</button>
            </div>
        </div>
    </div>

    <div id="start-menu" class="hidden">
        <div class="sm-header">
            <img src="https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png" style="image-rendering: pixelated;">
            <span>Usuario Local</span>
        </div>
        <div class="sm-body">
            <div class="sm-left">
                <div class="sm-item" onclick="openWindow('soundamp-player', 'SoundAmp', 'https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png'); toggleStartMenu(event)">
                    <img src="https://win98icons.alexmeub.com/icons/png/cd_audio_cd_a-3.png">
                    <div><span>Reproductor de Música</span><p>SoundAmp 3.0</p></div>
                </div>
                <div class="sm-item" onclick="openWindow('notepad-leeme', 'LEEME.txt', 'https://win98icons.alexmeub.com/icons/png/notepad_file-0.png'); toggleStartMenu(event)">
                    <img src="https://win98icons.alexmeub.com/icons/png/notepad_file-0.png">
                    <div><span>Bloc de notas</span><p>Editor de texto</p></div>
                </div>
            </div>
            <div class="sm-right">
                <div class="sm-item" onclick="openWindow('folder-videos', 'Mis Videos', 'https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png'); toggleStartMenu(event)"><span>Mis Videos</span></div>
                <div class="sm-item" onclick="openWindow('folder-images', 'Mis Imágenes', 'https://win98icons.alexmeub.com/icons/png/directory_closed-4.png'); toggleStartMenu(event)"><span>Mis Imágenes</span></div>
            </div>
        </div>
        <div class="sm-footer">
            <div class="sm-footer-btn" onclick="location.reload()"><img src="https://win98icons.alexmeub.com/icons/png/shut_down_normal-0.png"> Reiniciar equipo</div>
        </div>
    </div>

    <div id="taskbar">
        <button class="start-btn" id="start-btn" onclick="toggleStartMenu(event)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="filter: drop-shadow(1px 1px 1px rgba(0,0,0,0.5)); pointer-events: none;">
                <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                <path d="M2 17l10 5 10-5"></path>
                <path d="M2 12l10 5 10-5"></path>
            </svg>
            Inicio
        </button>
        
        <div id="taskbar-windows"></div>

        <div class="tray-area">
            <span id="clock">10:30 AM</span>
        </div>
    </div>

    <script>
        // --- 0. ARRANQUE INSTANTÁNEO ---
        window.onload = () => {
            setTimeout(() => {
                // Abren en cascada y dejan los iconos del escritorio libres
                openWindow('folder-images', 'Mis Imágenes', 'https://win98icons.alexmeub.com/icons/png/directory_closed-4.png');
                openWindow('folder-videos', 'Mis Videos', 'https://win98icons.alexmeub.com/icons/png/directory_open_file_mydocs-4.png');
                openWindow('notepad-leeme', 'LEEME.txt', 'https://win98icons.alexmeub.com/icons/png/notepad_file-0.png');
            }, 100);
        };


        // --- 1. LÓGICA DE VENTANAS Y BARRA DE TAREAS ---
        let zIndexCounter = 100;
        const activeWindows = {};

        function openWindow(id, title, iconSrc) {
            const win = document.getElementById(id);
            win.classList.remove('hidden', 'minimized');
            
            // Fix para Z-index
            zIndexCounter++;
            win.style.zIndex = zIndexCounter;

            if (!activeWindows[id]) {
                activeWindows[id] = true;
                const tbContainer = document.getElementById('taskbar-windows');
                const btn = document.createElement('div');
                btn.className = 'taskbar-item active';
                btn.id = 'taskbar-btn-' + id;
                btn.innerHTML = `<img src="${iconSrc}" width="16"> <span>${title}</span>`;
                btn.onclick = () => toggleWindow(id);
                tbContainer.appendChild(btn);
            }
            updateTaskbar();
        }

        function closeWindow(id, e) {
            if (e) e.stopPropagation(); 
            const win = document.getElementById(id);
            win.classList.add('hidden');
            win.classList.remove('maximized');
            
            if (activeWindows[id]) {
                delete activeWindows[id];
                const btn = document.getElementById('taskbar-btn-' + id);
                if (btn) btn.remove();
            }

            if (id === 'soundamp-player') scStop(); // Apagar musica si se cierra winamp
            updateTaskbar();
        }

        function minimizeWindow(id, e) {
            if (e) e.stopPropagation();
            document.getElementById(id).classList.add('minimized');
            updateTaskbar();
        }

        function maximizeWindow(id, e) {
            if (e) e.stopPropagation();
            document.getElementById(id).classList.toggle('maximized');
        }

        function toggleWindow(id) {
            const win = document.getElementById(id);
            if (win.classList.contains('minimized')) {
                win.classList.remove('minimized');
                zIndexCounter++;
                win.style.zIndex = zIndexCounter;
            } else {
                const currentZ = parseInt(win.style.zIndex) || 0;
                if (currentZ === zIndexCounter) {
                    win.classList.add('minimized'); 
                } else {
                    zIndexCounter++;
                    win.style.zIndex = zIndexCounter; 
                }
            }
            updateTaskbar();
        }

        function updateTaskbar() {
            for (let id in activeWindows) {
                const btn = document.getElementById('taskbar-btn-' + id);
                const win = document.getElementById(id);
                if (btn && win) {
                    const isTop = (parseInt(win.style.zIndex) || 0) === zIndexCounter;
                    if (!win.classList.contains('minimized') && isTop) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                }
            }
        }

        // LÓGICA DE ARRASTRE DE VENTANAS CON LÍMITES FÍSICOS
        function makeDraggable(win) {
            const titlebar = win.querySelector('.os-titlebar') || win.querySelector('.wa-titlebar');
            if (!titlebar) return;

            win.addEventListener('mousedown', () => {
                zIndexCounter++;
                win.style.zIndex = zIndexCounter;
                updateTaskbar();
            });

            titlebar.addEventListener('mousedown', dragMouseDown);

            function dragMouseDown(e) {
                // Previene arrastrar si se hizo clic en un botón de control
                if(e.target.closest('.os-controls') || e.target.closest('.wa-controls')) return;
                if(win.classList.contains('maximized')) return;
                e.preventDefault();
                
                let pos3 = e.clientX;
                let pos4 = e.clientY;
                
                function elementDrag(e2) {
                    e2.preventDefault();
                    let pos1 = pos3 - e2.clientX;
                    let pos2 = pos4 - e2.clientY;
                    pos3 = e2.clientX;
                    pos4 = e2.clientY;
                    
                    let newTop = win.offsetTop - pos2;
                    let newLeft = win.offsetLeft - pos1;

                    // LÍMITES DE PANTALLA
                    const maxLeft = window.innerWidth - 80; 
                    const maxTop = window.innerHeight - 38 - 30;
                    
                    newLeft = Math.max(-win.offsetWidth + 80, Math.min(newLeft, maxLeft));
                    newTop = Math.max(0, Math.min(newTop, maxTop));

                    win.style.top = newTop + "px";
                    win.style.left = newLeft + "px";
                }
                
                function closeDragElement() {
                    document.removeEventListener('mouseup', closeDragElement);
                    document.removeEventListener('mousemove', elementDrag);
                }

                document.addEventListener('mouseup', closeDragElement);
                document.addEventListener('mousemove', elementDrag);
            }
        }
        document.querySelectorAll('.window-container').forEach(win => { makeDraggable(win); });


        // --- 2. MENÚ DE INICIO ---
        function toggleStartMenu(e) { 
            if(e) e.stopPropagation();
            const sm = document.getElementById('start-menu');
            const btn = document.getElementById('start-btn');
            
            if(sm.style.display === 'flex') {
                sm.style.display = 'none';
                btn.classList.remove('active');
            } else {
                sm.style.display = 'flex';
                btn.classList.add('active');
            }
        }
        
        // Cierra el menú al clickear fuera
        document.addEventListener('click', (e) => {
            const sm = document.getElementById('start-menu');
            const btn = document.getElementById('start-btn');
            
            if (sm.style.display === 'flex' && !sm.contains(e.target) && !btn.contains(e.target)) {
                sm.style.display = 'none';
                btn.classList.remove('active');
            }
        });


        // --- 3. LÓGICA SOUNDAMP (CON SLIDER DE PROGRESO FUNCIONAL) ---
        const widget = SC.Widget(document.getElementById('sc-widget'));
        const timeDisplay = document.getElementById('wa-time-display');
        const visualizer = document.getElementById('visualizer');
        const totalTimeDisplay = document.getElementById('wa-total-time');
        
        // Elementos del slider
        const seekSlider = document.getElementById('wa-seek-slider');
        const totalTimeLine = document.getElementById('wa-total-time-line');
        const currentTimeLine = document.getElementById('wa-current-time-line');
        
        let trackDuration = 0;
        let isSeeking = false;

        function formatTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const m = Math.floor(totalSeconds / 60);
            const s = totalSeconds % 60;
            return `${m < 10 ? '0' : ''}${m}:${s < 10 ? '0' : ''}${s}`;
        }

        // Obtener la duración de la canción al cargar
        widget.bind(SC.Widget.Events.READY, () => {
            widget.getDuration((duration) => { 
                trackDuration = duration; 
                const formatted = formatTime(duration);
                totalTimeDisplay.innerText = formatted;
                totalTimeLine.innerText = formatted;
            });
        });

        widget.bind(SC.Widget.Events.PLAY, () => { visualizer.classList.add('playing'); });
        widget.bind(SC.Widget.Events.PAUSE, () => { visualizer.classList.remove('playing'); });
        widget.bind(SC.Widget.Events.FINISH, () => { visualizer.classList.remove('playing'); });

        widget.bind(SC.Widget.Events.PLAY_PROGRESS, (data) => {
            const formattedCurrent = formatTime(data.currentPosition);
            timeDisplay.innerText = formattedCurrent;
            currentTimeLine.innerText = formattedCurrent; 
            
            if (trackDuration === 0) {
                 widget.getDuration((duration) => {
                    trackDuration = duration;
                    const f = formatTime(duration);
                    totalTimeDisplay.innerText = f;
                    totalTimeLine.innerText = f;
                 });
            }

            // Mueve el slider automáticamente SI el usuario no lo está arrastrando
            if(trackDuration > 0 && !isSeeking) {
                seekSlider.value = (data.currentPosition / trackDuration) * 100;
            }
        });

        function scPlay() { widget.play(); }
        function scPause() { widget.pause(); }
        function scStop() { 
            widget.pause(); 
            widget.seekTo(0); 
            document.getElementById('visualizer').classList.remove('playing'); 
            timeDisplay.innerText = "00:00"; 
            currentTimeLine.innerText = "00:00";
            seekSlider.value = 0;
        }

        // Eventos del Slider de Progreso para adelantar canción
        seekSlider.addEventListener('mousedown', () => isSeeking = true);
        seekSlider.addEventListener('mouseup', () => { isSeeking = false; });
        seekSlider.addEventListener('touchstart', () => isSeeking = true);
        seekSlider.addEventListener('touchend', () => { isSeeking = false; });
        
        seekSlider.addEventListener('change', (e) => {
            if (trackDuration > 0) {
                const percent = e.target.value / 100;
                widget.seekTo(percent * trackDuration);
            }
        });

        // Evento del Fader de Volumen
        document.getElementById('wa-vol-slider').addEventListener('input', function(e) {
            widget.setVolume(e.target.value);
        });


        // --- 4. VISOR MULTIMEDIA Y GALERÍA ---
        const imageGallery = [
            { src: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgPsdaTj9ebqPIdCv8cc0ofCD7OjIh7y264BCYUvoTINijmxaU6LJVrMgh1lpkAD1bH-Wn62BIWjQczsNkF8cHSakDbgeLFDdnUhZyZhzOgVYSqu9phnU4HutjuZOCgHjt6Dk2Vs9kUDnw/s1600/Dla_prov.jpg", title: "Dla_prov.jpg" },
            { src: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEg_JczWFySWlfOX7f5xAELbDkjKwvgxlWwgPnmdD5DTvnp_zicjcrshyphenhyphen78lee2I-MEP2LglMxmBo-Jpgf4BPRRLFs6C0CfjXKdSQW5T9Rf9XRCUG6FbC86Wsx30W_Q3uKKdp1az7h3cvpw/s1600/EPR.jpg", title: "EPR.jpg" },
            { src: "https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEgHuIyhlzrd5RO2p7NVkoIBJ06uSDTtIzCQ_Pe6ctGmPtJ8_7Np7CLlAOIbXQRtsa09hyphenhyphenVQObMuVTSNRDJpgU9h5-DyNAWEvPRXyCw_OolRyC6KqGyl3kQUSWQDLFXhF9qwWHbRem3S_cs/s1600/De+las+Aguas.jpg", title: "De_las_Aguas.jpg" },
            { src: "https://iili.io/qfCtFrg.jpg", title: "Samurai.jpg" },
            { src: "https://iili.io/qfCD3t2.jpg", title: "Koala.jpg" }
        ];
        let currentImageIndex = 0;

        function openVideo(src, title) {
            scPause(); // Solo se frena la música si ves un video
            
            document.getElementById('media-title').innerHTML = `<img src="https://win98icons.alexmeub.com/icons/png/video_file-0.png"> Reproductor Multimedia - ${title}`;
            document.getElementById('viewer-image').style.display = 'none';
            document.getElementById('media-viewer-toolbar').classList.remove('active'); // Ocultar flechas
            
            document.getElementById('viewer-iframe').style.display = 'block';
            document.getElementById('viewer-iframe').src = `https://www.youtube.com/embed/${src}?autoplay=1&rel=0`;
            
            openWindow('media-viewer', title, 'https://win98icons.alexmeub.com/icons/png/video_file-0.png');
        }

        function openImage(index) {
            // No se frena la música al abrir fotos
            currentImageIndex = index;
            const imgObj = imageGallery[index];
            
            document.getElementById('media-title').innerHTML = `<img src="https://win98icons.alexmeub.com/icons/png/image_file-0.png"> Visor de Imágenes - ${imgObj.title}`;
            document.getElementById('viewer-iframe').style.display = 'none';
            document.getElementById('viewer-iframe').src = ""; 
            
            document.getElementById('viewer-image').style.display = 'block';
            document.getElementById('viewer-image').src = imgObj.src;
            document.getElementById('media-viewer-toolbar').classList.add('active'); // Mostrar flechas
            
            openWindow('media-viewer', imgObj.title, 'https://win98icons.alexmeub.com/icons/png/image_file-0.png');
        }

        function prevImage() {
            if(currentImageIndex > 0) openImage(currentImageIndex - 1);
            else openImage(imageGallery.length - 1);
        }
        function nextImage() {
            if(currentImageIndex < imageGallery.length - 1) openImage(currentImageIndex + 1);
            else openImage(0);
        }

        function closeViewer(e) { 
            closeWindow('media-viewer', e); 
            setTimeout(() => { document.getElementById('viewer-iframe').src = ''; }, 300);
        }

        // --- 5. RELOJ ---
        function updateClock() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12; hours = hours ? hours : 12; 
            document.getElementById('clock').innerText = `${hours}:${minutes} ${ampm}`;
        }
        setInterval(updateClock, 1000); updateClock();

    </script>
</body>
</html>